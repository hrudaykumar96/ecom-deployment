import{R as f,u as b,a as m,g as w,r as t,s as h,f as d,j as e,p as j}from"./index-02v5Kx9p.js";import{u as v,c as N,a as i,b as g}from"./index.esm-BnwETkTM.js";import{B as E}from"./ButtonLoader-Ds9zo1c0.js";const p=f.memo(({data:a})=>{var n;const o=b(),u=m(r=>r.userslice.loading),l=m(r=>r.userslice.data),s=v({enableReinitialize:!0,initialValues:{email:((n=a==null?void 0:a.success)==null?void 0:n.email)||"",password:"",confirm_password:""},validationSchema:N({email:i().required("Enter email address").email("Enter a valid email address"),password:i().required("Enter password").min(8,"Password should be at least 8 characters").max(12,"Password should not exceed 12 characters"),confirm_password:i().required("Enter confirm password").oneOf([g("password")],"Passwords does not match")}),onSubmit:r=>{o(w(r));const x=document.getElementById("exampleModal"),c=window.bootstrap.Modal.getInstance(x);c&&c.hide()}});return t.useEffect(()=>{var r;a!=null&&a.success&&s.setFieldValue("email",(r=a==null?void 0:a.success)==null?void 0:r.email)},[a]),t.useEffect(()=>{l&&(l.success?(h("Success",`${l.success}`,"success"),s.resetForm(),o(d())):l.email?(s.setErrors({email:`${l.email}`}),o(d())):l.error&&(h("Error","internal server error","error"),s.resetForm(),localStorage.removeItem("token"),o(d())))},[l,o]),e.jsx("div",{className:"modal fade",id:"exampleModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsx("form",{className:"container",onSubmit:s.handleSubmit,children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h1",{className:"modal-title fs-5",id:"exampleModalLabel",children:"Change Password"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("span",{className:"text-danger",children:"*"}),e.jsx("input",{type:"email",name:"email",value:s.values.email,onBlur:s.handleBlur,onChange:s.handleChange,className:`form-control ${s.touched.email&&(s.errors.email?"is-invalid":"")}`,placeholder:"Enter email address",disabled:!0}),e.jsx("div",{className:"invalid-feedback",children:s.errors.email})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsx("span",{className:"text-danger",children:"*"}),e.jsx("input",{type:"password",name:"password",value:s.values.password,onBlur:s.handleBlur,onChange:s.handleChange,className:`form-control ${s.touched.password&&(s.errors.password?"is-invalid":"")}`,placeholder:"Enter password"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.password})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"confirm_password",className:"form-label",children:"Confirm Password"}),e.jsx("span",{className:"text-danger",children:"*"}),e.jsx("input",{type:"password",name:"confirm_password",value:s.values.confirm_password,onBlur:s.handleBlur,onChange:s.handleChange,className:`form-control ${s.touched.confirm_password&&(s.errors.confirm_password?"is-invalid":"")}`,placeholder:"Enter confirm password"}),e.jsx("div",{className:"invalid-feedback",children:s.errors.confirm_password})]})]}),e.jsx("div",{className:"modal-footer",children:u?e.jsx(E,{}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"})]})})]})})})})});p.displayName="Change_Password";p.propTypes={data:j.any};export{p as default};
