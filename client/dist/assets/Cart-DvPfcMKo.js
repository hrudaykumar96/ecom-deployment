import{R as D,u,a as j,r as f,y as b,j as e,L as I,p as y,s as d,z as P,A as R,B as z,C as A,D as q,k as F}from"./index-02v5Kx9p.js";import{i as L}from"./cardloader-DztRGZ-7.js";import{S as m}from"./index-DmWVH89f.js";import{P as T,A as Y}from"./Profile_Details-ZbcIGot1.js";import"./index.esm-BnwETkTM.js";import"./ButtonLoader-Ds9zo1c0.js";const v=D.memo(({cart_loading:t,cart_data:l})=>{var c,x;const a=u(),n=localStorage.getItem("token"),i=j(s=>s.deletecartitemslice.response),r=({id:s,quantity:N,size:h,price:g})=>{n&&d({title:"Are you sure?",text:"You will not be able to recover",icon:"warning",buttons:["No, cancel plx!","Yes, delete it!"]}).then(p=>{p?(a(P({token:n,id:s,quantity:N,size:h,price:g})),d("Deleted!","product removed successfully","success"),a(R())):d("Cancelled","Your imaginary file is safe :)","error")})};f.useEffect(()=>{i&&n&&i!=null&&i.success&&a(b(n))},[n,i,a]);const o=((x=(c=l==null?void 0:l.success)==null?void 0:c[0])==null?void 0:x.products)||[];return e.jsx("div",{className:"container pt-3 pb-3 ps-auto pe-auto",children:o.length>0?o.map((s,N)=>{var h,g,p,w,C;return e.jsx("div",{className:"card mb-3",style:{maxWidth:"100%"},children:e.jsxs("div",{className:"row g-0",children:[e.jsx("div",{className:"col-md-4",children:e.jsx(I,{to:`/description/${(h=s.product)==null?void 0:h._id}`,children:e.jsx("img",{src:t?L:`https://ecom-lwfl.onrender.com:3000/${(g=s.product)==null?void 0:g.images[0]}`,className:"img-fluid rounded-start w-100",style:{height:"300px",objectFit:"fill",imageRendering:"pixelated"},alt:((p=s==null?void 0:s.product)==null?void 0:p.name)||"Product Image",loading:"lazy"})})}),e.jsx("div",{className:"col-md-8",children:e.jsxs("div",{className:"card-body",children:[e.jsx("p",{className:"card-text",children:t?e.jsx(m,{}):(w=s==null?void 0:s.product)==null?void 0:w.about}),e.jsx("div",{className:"card-text",children:e.jsxs("p",{children:["Quantity: ",t?e.jsx(m,{}):s==null?void 0:s.quantity]})}),e.jsxs("small",{children:["Size: ",t?e.jsx(m,{}):s==null?void 0:s.size]}),e.jsxs("p",{className:"card-text",children:[e.jsx("i",{className:"fa-solid fa-indian-rupee-sign"})," ",t?e.jsx(m,{}):(C=s==null?void 0:s.product)==null?void 0:C.price]}),e.jsx("p",{className:"card-text",children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{var E,S;return r({id:(E=s.product)==null?void 0:E._id,quantity:s==null?void 0:s.quantity,size:s==null?void 0:s.size,price:(S=s==null?void 0:s.product)==null?void 0:S.price})},children:"Remove"})})]})})]})},N)}):e.jsx("p",{children:"No products in the cart"})})});v.displayName="Cart_Items";v.propTypes={cart_data:y.object,cart_loading:y.bool};const k=D.memo(({cart_loading:t,cart_data:l})=>{var o,c,x;const a=u(),n=localStorage.getItem("token"),i=j(s=>s.placeorderslice.response),r=()=>{n&&a(A(n))};return f.useEffect(()=>{i&&(i!=null&&i.success?(a(b(n)),d("Success","order placed successfully","success"),a(z())):i!=null&&i.error&&(d("Error","internal server error","error"),a(z())))},[i,a,n]),e.jsx("div",{className:"container pb-3 ps-auto pe-auto",children:e.jsxs("div",{className:"card",style:{maxWidth:"30rem"},children:[e.jsx("div",{className:"card-header",children:"price details"}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{children:"price:"}),e.jsxs("p",{children:[e.jsx("i",{className:"fa-solid fa-indian-rupee-sign"})," ",t?e.jsx(m,{}):(o=l==null?void 0:l.success[0])==null?void 0:o.price]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{children:"delivery charges:"}),e.jsxs("p",{children:[" ",e.jsx("i",{className:"fa-solid fa-indian-rupee-sign"})," ",t?e.jsx(m,{}):(c=l==null?void 0:l.success[0])==null?void 0:c.delivery_charges]})]}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx("strong",{children:"total:"}),e.jsxs("p",{children:[e.jsx("i",{className:"fa-solid fa-indian-rupee-sign"})," ",t?e.jsx(m,{}):(x=l==null?void 0:l.success[0])==null?void 0:x.total_price]})]})]}),e.jsx("div",{className:"card-footer",children:e.jsx("button",{type:"button",className:"btn btn-warning text-light",onClick:r,style:{backgroundColor:"#fb641b"},children:"place order"})})]})})});k.displayName="Payment_Details";k.propTypes={cart_data:y.any,cart_loading:y.bool};const J=()=>{var o;f.useEffect(()=>{document.title="Ecom | Cart"},[]);const{loading:t,data:l}=j(c=>c.userdata),a=u(),n=localStorage.getItem("token"),i=j(c=>c.getcartdataslice.loading),r=j(c=>c.getcartdataslice.data);return f.useEffect(()=>{n&&a(b(n))},[n,a]),f.useEffect(()=>{r&&r!=null&&r.error&&(d("Error","internal server error","error"),a(q()))},[a,r]),t?e.jsx(F,{}):e.jsx("div",{className:"min-vh-100",style:{backgroundColor:"rgba(217,217,217"},children:((o=r==null?void 0:r.success)==null?void 0:o.length)>0?e.jsxs(e.Fragment,{children:[e.jsx(v,{cart_loading:i,cart_data:r}),e.jsx(T,{data:l}),e.jsx(Y,{data:l}),e.jsx(k,{cart_loading:i,cart_data:r})]}):e.jsx("p",{className:"text-danger text-center w-100 pt-3",children:"cart is empty"})})};export{J as default};
