import{R as y,r as m,u as B,a as C,M as q,s as u,N as p,h as F,j as e}from"./index-02v5Kx9p.js";import{N as k}from"./Navs-C4xq8lsz.js";import{u as $,c as w,a as i,d as f,e as S,f as _}from"./index.esm-BnwETkTM.js";import{B as R}from"./ButtonLoader-Ds9zo1c0.js";const g=y.memo(()=>{const v=["image/jpg","image/jpeg","image/png"],[h,t]=m.useState([]),n=B(),b=localStorage.getItem("token"),{loading:x,response:l}=C(r=>r.addproductslice),o=m.useRef(null),a=$({initialValues:{brand_name:"",category:"",fabric:"",sleeve:"",pattern:"",color:"",items:"",price:"",section:"",about:"",status:"",description:"",images:[]},validationSchema:w({brand_name:i().required("Brand name is required"),category:i().required("Category is required"),fabric:i().required("Fabric type is required"),sleeve:i().required("Sleeve type is required"),pattern:i().required("Pattern is required"),color:i().required("Color is required"),items:f().required("Number of items is required").positive().integer(),price:f().required("Price is required").positive(),section:i().required("Select section"),about:i().required("About product is required"),status:i().required("Status is required"),description:i().required("Description is required"),images:S().min(1,"atleast one image is required").of(_().required("upload product image").test("fileformat","only jpg, jpeg, png supported",r=>r&&v.includes(r==null?void 0:r.type)))}),onSubmit:r=>{const s=new FormData;s.append("brand_name",r.brand_name),s.append("category",r.category),s.append("fabric",r.fabric),s.append("sleeve",r.sleeve),s.append("pattern",r.pattern),s.append("color",r.color),s.append("items",r.items),s.append("price",r.price),s.append("section",r.section),s.append("about",r.about),s.append("status",r.status),s.append("description",r.description),r.images&&r.images.length?r.images.forEach(c=>{s.append("photos",c)}):r.images&&s.append("photos",r.images),n(q({token:b,formData:s}))}}),j=r=>{const s=Array.from(r.target.files);a.setFieldValue("images",s);const c=s.map(d=>URL.createObjectURL(d));t(c)};return m.useEffect(()=>{l&&(l!=null&&l.success?(a.resetForm(),t([]),o.current&&(o.current.value=""),u("Success",`${l==null?void 0:l.success}`,"success"),n(p()),n(F(b))):l.error?(u("Error","internal server error","error"),a.resetForm(),t([]),o.current&&(o.current.value=""),n(p())):l!=null&&l.status&&(u("Error",`${l.status}`,"warning"),a.resetForm(),t([]),o.current&&(o.current.value=""),n(p())))},[l,a,n]),e.jsx("div",{className:"p-3",children:e.jsxs("form",{className:"bg-light p-3",style:{borderRadius:"1rem"},onSubmit:a.handleSubmit,children:[e.jsx("h4",{className:"text-center text-decoration-underline",children:"add products"}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-lg-4 col-md-6 col-sm-12 mb-3",children:[e.jsx("label",{htmlFor:"brand",className:"form-label",children:"brand name"}),e.jsx("input",{type:"text",name:"brand_name",value:a.values.brand_name,onBlur:a.handleBlur,onChange:a.handleChange,placeholder:"enter brand name",className:`form-control ${a.errors.brand_name?"is-invalid":""}`}),e.jsx("div",{className:"invalid-feedback",children:a.errors.brand_name})]}),e.jsxs("div",{className:"col-lg-4 col-md-6 col-sm-12 mb-3",children:[e.jsx("label",{htmlFor:"category",className:"form-label",children:"category"}),e.jsx("input",{type:"text",name:"category",value:a.values.category,onBlur:a.handleBlur,onChange:a.handleChange,placeholder:"enter category",className:`form-control ${a.errors.category?"is-invalid":""}`}),e.jsx("div",{className:"invalid-feedback",children:a.errors.category})]}),e.jsxs("div",{className:"col-lg-4 col-md-6 col-sm-12 mb-3",children:[e.jsx("label",{htmlFor:"fabric",className:"form-label",children:"fabric"}),e.jsx("input",{type:"text",name:"fabric",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.fabric,placeholder:"enter fabric",className:`form-control ${a.errors.fabric?"is-invalid":""}`}),e.jsx("div",{className:"invalid-feedback",children:a.errors.fabric})]}),e.jsxs("div",{className:"col-lg-4 col-md-6 col-sm-12 mb-3",children:[e.jsx("label",{htmlFor:"sleeve",className:"form-label",children:"sleeve"}),e.jsx("input",{type:"text",name:"sleeve",value:a.values.sleeve,onBlur:a.handleBlur,onChange:a.handleChange,className:`form-control ${a.errors.sleeve?"is-invalid":""}`,placeholder:"enter sleeve type"}),e.jsx("div",{className:"invalid-feedback",children:a.errors.sleeve})]}),e.jsxs("div",{className:"col-lg-4 col-md-6 col-sm-12 mb-3",children:[e.jsx("label",{htmlFor:"pattern",className:"form-label",children:"pattern"}),e.jsx("input",{type:"text",name:"pattern",value:a.values.pattern,onBlur:a.handleBlur,onChange:a.handleChange,placeholder:"enter pattern",className:`form-control ${a.errors.pattern?"is-invalid":""}`}),e.jsx("div",{className:"invalid-feedback",children:a.errors.pattern})]}),e.jsxs("div",{className:"col-lg-4 col-md-6 col-sm-12 mb-3",children:[e.jsx("label",{htmlFor:"color",className:"form-label",children:"color"}),e.jsx("input",{type:"text",name:"color",value:a.values.color,onBlur:a.handleBlur,onChange:a.handleChange,placeholder:"enter color",className:`form-control ${a.errors.color?"is-invalid":""}`}),e.jsx("div",{className:"invalid-feedback",children:a.errors.color})]}),e.jsxs("div",{className:"col-lg-4 col-md-6 col-sm-12 mb-3",children:[e.jsx("label",{htmlFor:"items",className:"form-label",children:"number of items"}),e.jsx("input",{type:"number",name:"items",value:a.values.items,onBlur:a.handleBlur,onChange:a.handleChange,placeholder:"enter number of items",className:`form-control ${a.errors.items?"is-invalid":""}`}),e.jsx("div",{className:"invalid-feedback",children:a.errors.items})]}),e.jsxs("div",{className:"col-lg-4 col-md-6 col-sm-12 mb-3",children:[e.jsx("label",{htmlFor:"price",className:"form-label",children:"price"}),e.jsx("input",{type:"number",name:"price",value:a.values.price,onBlur:a.handleBlur,onChange:a.handleChange,placeholder:"enter price",className:`form-control ${a.errors.price?"is-invalid":""}`}),e.jsx("div",{className:"invalid-feedback",children:a.errors.price})]}),e.jsxs("div",{className:"col-lg-4 col-md-6 col-sm-12 mb-3",children:[e.jsx("label",{htmlFor:"items",className:"form-label",children:"section"}),e.jsxs("select",{className:`form-control ${a.errors.section?"is-invalid":""}`,name:"section","aria-label":"Default select example",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.section,children:[e.jsx("option",{value:"",children:"Select Section"}),e.jsx("option",{value:"mens wear",children:"Mens Wear"}),e.jsx("option",{value:"womens wear",children:"Womens Wear"}),e.jsx("option",{value:"footwear",children:"footwear"})]}),e.jsx("div",{className:"invalid-feedback",children:a.errors.section})]}),e.jsxs("div",{className:"col-lg-6 col-md-6 col-sm-12 mb-3",children:[e.jsx("label",{htmlFor:"short description",className:"form-label",children:"about product"}),e.jsx("input",{type:"text",name:"about",value:a.values.about,onChange:a.handleChange,onBlur:a.handleBlur,placeholder:"enter short description",className:`form-control ${a.errors.about?"is-invalid":""}`}),e.jsx("div",{className:"invalid-feedback",children:a.errors.about})]}),e.jsxs("div",{className:"col-lg-6 col-md-6 col-sm-12 mb-3",children:[e.jsx("label",{htmlFor:"status",className:"form-label",children:"status"}),e.jsxs("select",{className:`form-control ${a.errors.status?"is-invalid":""}`,"aria-label":"Default select example",name:"status",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.status,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"in stock",children:"In Stock"}),e.jsx("option",{value:"only few left",children:"Only few left"}),e.jsx("option",{value:"out of stock",children:"Out of stock"})]}),e.jsx("div",{className:"invalid-feedback",children:a.errors.status})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"description",className:"form-label",children:"description"}),e.jsx("textarea",{name:"description",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.description,className:`form-control ${a.errors.description?"is-invalid":""}`,placeholder:"enter product description"}),e.jsx("div",{className:"invalid-feedback",children:a.errors.description})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"formFile",className:"form-label",children:"product images"}),e.jsx("input",{className:`form-control ${a.errors.images?"is-invalid":""}`,type:"file",multiple:!0,name:"images",onBlur:a.handleBlur,onChange:j,id:"formFile",ref:o}),e.jsx("div",{className:"invalid-feedback",children:a.errors.images})]}),h.length>0?e.jsx("div",{className:"card",children:e.jsx("div",{className:"card-body row g-3",children:h.map((r,s)=>e.jsxs("div",{className:"col-lg-2 col-md-4 col-sm-12",children:[e.jsx("div",{className:"w-auto position-absolute",children:e.jsx("button",{type:"button",className:"text-danger fs-4",onClick:()=>{const c=a.values.images.filter((d,N)=>N!==s);a.setFieldValue("images",c),t(c.map(d=>URL.createObjectURL(d)))},children:e.jsx("i",{className:"fa-solid fa-rectangle-xmark"})})}),e.jsx("img",{src:r,alt:"images",className:"img-fluid"})]},s))})}):null]}),x?e.jsx("div",{className:"m-3 text-end",children:e.jsx(R,{})}):e.jsx("div",{className:"m-3 text-end",children:e.jsx("input",{type:"submit",value:"add product",className:"btn btn-success"})})]})})});g.displayName="Add_Products_Form";const I=()=>(m.useEffect(()=>{document.title="Ecom | Add Products"},[]),e.jsxs("div",{className:"min-vh-100 w-100",style:{backgroundColor:"rgba(217,217,217"},children:[e.jsx(k,{}),e.jsx(g,{})]}));export{I as default};
