import{R as k,u as y,a as N,r as m,O as g,P as I,Q as C,j as e,p as B,s as f,S as L,T as _,U as w,V as $,W as A}from"./index-02v5Kx9p.js";import{N as q}from"./Navs-C4xq8lsz.js";import{u as D,c as T,a as j}from"./index.esm-BnwETkTM.js";import{B as P}from"./ButtonLoader-Ds9zo1c0.js";const S=k.memo(({setId:a})=>{const n=localStorage.getItem("token"),i=y(),{loading:h,data:s}=N(t=>t.allsellerslice),l=N(t=>t.deletesellerdataslicebyid.response),[r,p]=m.useState({name:"",email:"",mobile:"",status:""}),[x,b]=m.useState([]);m.useEffect(()=>{n&&i(g(n))},[n,i]),m.useEffect(()=>{s&&s!=null&&s.error&&i(I())},[s,i]),m.useEffect(()=>{s&&Array.isArray(s==null?void 0:s.success)?v(s==null?void 0:s.success):b([])},[s,i,r]);const v=t=>{let c=[...t];r.name&&(c=c.filter(u=>u.name.toLowerCase().includes(r.name.toLowerCase()))),r.email&&(c=c.filter(u=>u.email.toLowerCase().includes(r.email.toLowerCase()))),r.mobile&&(c=c.filter(u=>u.mobile.toString().includes(r.mobile))),r.status&&(c=c.filter(u=>u.status.toLowerCase()===r.status.toLowerCase())),b(c)},d=t=>{const{name:c,value:u}=t.target;p(F=>({...F,[c]:u}))},o=t=>{a(t)},M=t=>{f({title:"Are you sure?",text:"You will not be able to recover",icon:"warning",buttons:["No, cancel plx!","Yes, delete it!"]}).then(c=>{c?(i(L({token:n,id:t})),i(C()),f("Deleted!","Your imaginary file has been deleted.","success")):f("Cancelled","Your imaginary file is safe :)","error")})};return m.useEffect(()=>{l&&l!=null&&l.success&&n&&(i(g(n)),i(C()))},[l,i,n]),e.jsxs("div",{className:"d-flex align-items-center justify-content-center flex-column min-vh-100 p-2",children:[e.jsx("h4",{className:"text-center",children:"Seller Management"}),e.jsx("div",{className:"table-responsive w-100",children:e.jsxs("table",{className:"table table-bordered text-center",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("p",{children:"Name"}),e.jsx("input",{type:"search",name:"name",className:"form-control",placeholder:"Search by Name",value:r.name,onChange:d})]})}),e.jsx("th",{scope:"col",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("p",{children:"Email"}),e.jsx("input",{type:"email",name:"email",className:"form-control",placeholder:"Search by Email",value:r.email,onChange:d})]})}),e.jsx("th",{scope:"col",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("p",{children:"Mobile Number"}),e.jsx("input",{type:"number",name:"mobile",className:"form-control",placeholder:"Search by Mobile",value:r.mobile,onChange:d})]})}),e.jsx("th",{scope:"col",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("p",{children:"Status"}),e.jsxs("select",{name:"status",className:"form-select",value:r.status,onChange:d,children:[e.jsx("option",{value:"",children:"Select Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"pending verification",children:"Pending Verification"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"banned",children:"Banned"}),e.jsx("option",{value:"on hold",children:"On Hold"}),e.jsx("option",{value:"deactivated",children:"Deactivated"})]})]})}),e.jsx("th",{scope:"col",children:"Action"})]})}),e.jsx("tbody",{children:h?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",children:e.jsx("p",{className:"text-center",children:"Loading, please wait..."})})}):e.jsx(e.Fragment,{children:x.length>0?x.map((t,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.name}),e.jsx("td",{style:{textTransform:"none"},children:t.email}),e.jsx("td",{children:t.mobile}),e.jsx("td",{children:t.status}),e.jsx("td",{children:e.jsxs("div",{className:"d-flex flex-wrap justify-content-center",children:[e.jsx("button",{type:"button",className:"btn btn-success","data-bs-toggle":"modal","data-bs-target":"#sellerModal",onClick:()=>o(t._id),children:e.jsx("i",{className:"fa-solid fa-pen-to-square"})}),e.jsx("button",{type:"button",className:"btn btn-danger",onClick:()=>M(t._id),children:e.jsx("i",{className:"fa-solid fa-trash"})})]})})]},c)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",children:e.jsx("p",{className:"text-center text-danger",children:"No data found"})})})})})]})})]})});S.displayName="Seller_Management_Section";S.propTypes={setId:B.any};const E=k.memo(({data:a})=>{var r,p,x,b,v;const n=y(),i=localStorage.getItem("token"),{loading:h,response:s}=N(d=>d.updatesellerdataslicebyid),l=D({enableReinitialize:!0,initialValues:{name:((r=a==null?void 0:a.success)==null?void 0:r.name)||"",email:((p=a==null?void 0:a.success)==null?void 0:p.email)||"",mobile:((x=a==null?void 0:a.success)==null?void 0:x.mobile)||"",address:((b=a==null?void 0:a.success)==null?void 0:b.address)||"",status:((v=a==null?void 0:a.success)==null?void 0:v.status)||""},validationSchema:T({name:j().required("Enter your name").min(3,"Name should be at least 3 characters"),email:j().required("Enter email address").email("Enter valid email address"),mobile:j().required("Enter mobile number").length(10,"Enter valid mobile number"),address:j().required("Enter address").min(5,"Enter full address"),status:j().required("Select status")}),onSubmit:d=>{var o;n(_({token:i,id:(o=a==null?void 0:a.success)==null?void 0:o._id,values:d}))}});return m.useEffect(()=>{if(s){if(s!=null&&s.success){l.resetForm();const d=document.getElementById("sellerModal"),o=window.bootstrap.Modal.getInstance(d);o&&o.hide(),f("Success",`${s==null?void 0:s.success}`,"success"),n(w()),n(g(i))}else s!=null&&s.email?l.setErrors({email:s==null?void 0:s.email}):s!=null&&s.mobile&&l.setErrors({mobile:s==null?void 0:s.mobile});if(s!=null&&s.error){n($()),n(w());const d=document.getElementById("sellerModal"),o=window.bootstrap.Modal.getInstance(d);o&&o.hide(),f("Error","Internal server error","error")}}},[l,s,n]),e.jsx("div",{className:"modal fade",id:"sellerModal",tabIndex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:e.jsx("div",{className:"modal-dialog modal-dialog-centered",children:e.jsx("div",{className:"modal-content",children:e.jsxs("form",{onSubmit:l.handleSubmit,children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h1",{className:"modal-title fs-5",id:"exampleModalLabel",children:"Update Profile"}),e.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Name"}),e.jsx("span",{className:"text-danger",children:"*"}),e.jsx("input",{type:"text",name:"name",onBlur:l.handleBlur,onChange:l.handleChange,value:l.values.name,className:`form-control ${l.errors.name?"is-invalid":""}`,placeholder:"Enter your name"}),e.jsx("div",{className:"invalid-feedback",children:l.errors.name})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email"}),e.jsx("span",{className:"text-danger",children:"*"}),e.jsx("input",{type:"email",name:"email",onBlur:l.handleBlur,onChange:l.handleChange,value:l.values.email,className:`form-control ${l.errors.email?"is-invalid":""}`,placeholder:"Enter email address"}),e.jsx("div",{className:"invalid-feedback",children:l.errors.email})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"mobile",className:"form-label",children:"Mobile Number"}),e.jsx("span",{className:"text-danger",children:"*"}),e.jsx("input",{type:"text",name:"mobile",onBlur:l.handleBlur,onChange:l.handleChange,value:l.values.mobile,className:`form-control ${l.errors.mobile?"is-invalid":""}`,placeholder:"Enter mobile number"}),e.jsx("div",{className:"invalid-feedback",children:l.errors.mobile})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"address",className:"form-label",children:"Address"}),e.jsx("span",{className:"text-danger",children:"*"}),e.jsx("textarea",{name:"address",onBlur:l.handleBlur,onChange:l.handleChange,value:l.values.address,className:`form-control ${l.errors.address?"is-invalid":""}`,placeholder:"Enter address"}),e.jsx("div",{className:"invalid-feedback",children:l.errors.address})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),e.jsx("span",{className:"text-danger",children:"*"}),e.jsxs("select",{name:"status",onBlur:l.handleBlur,onChange:l.handleChange,value:l.values.status,className:`form-select ${l.errors.status?"is-invalid":""}`,children:[e.jsx("option",{value:"",label:"Select Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"pending verification",children:"Pending Verification"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"banned",children:"Banned"}),e.jsx("option",{value:"on hold",children:"On Hold"}),e.jsx("option",{value:"deactivated",children:"Deactivated"})]}),e.jsx("div",{className:"invalid-feedback",children:l.errors.status})]})]}),e.jsx("div",{className:"modal-footer",children:h?e.jsx(P,{}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save changes"})]})})]})})})})});E.displayName="Update_Seller";E.propTypes={data:B.any};const O=()=>{m.useEffect(()=>{document.title="Ecom | Seller Management"},[]);const[a,n]=m.useState(null),i=y(),h=localStorage.getItem("token"),s=N(l=>l.getsellerdataslicebyid.data);return m.useEffect(()=>{h&&a&&i(A({token:h,id:a}))},[h,a,i]),e.jsxs("div",{className:"min-vh-100 w-100",style:{backgroundColor:"rgba(217,217,217"},children:[e.jsx(q,{}),e.jsx(S,{setId:n}),e.jsx(E,{data:s})]})};export{O as default};
